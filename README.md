# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Базовый код

### Класс Component<T> 
  Является дженериком, обеспечивает базовый функционал работы с DOM-элементами.
  В конструктор принимает элемент разметки, являющийся основным родительским контейнером компонента.
#### Методы:
  - toggleClass - переключает класс HTML-элемента, который указывается в параметрах, вместе с именем класса, на который нужно переключиться.
  - setText -  устанавливает текстовое содержимое HTML-элемента. 
  - setDisabled - изменяет статус блокировки для переданного элемента.
  - setHidden - скрывает переданный элемент.
  - setVisible -  отоброжает переданный элемент.
  - render - отображение данных.

### Класс EventEmmiter
  Реализует паттерн «Наблюдатель» и позволяет подписываться на события и уведомлять подписчиков о наступлении события.
#### Методы:
  <b>on , off , emit</b> — для подписки на событие, отписки от события и уведомления подписчиков о наступлении события соответственно.
  Дополнительно реализованы методы <b>onAll и offAll</b> — для подписки на все события и сброса всех подписчиков. Интересным дополнением является метод <b>trigger</b> , генерирующий заданное событие с заданными аргументами. Это позволяет передавать его в качестве обработчика события в другие классы. Эти классы будут генерировать события, не будучи при этом напрямую зависимыми от класса EventEmitter.

### Класс Api
  Содержит в себе базовую логику отправки запросов. В конструктор передается базовый адрес сервера и опциональный объект для запросов.
#### Методы:
  - get -  позволяет получить данные с сервера.
  - post - позволяет отправить данные на сервер.

### Класс Modal
  Реализует модальное окно.
#### Методы:
  - open - позволяет открыть модальное окно
  - close - закрывает модальное окно либо при клике по кнопке с крестиком, либо ко клику на оверлей

## Компоненты модели данных
### Класс Product
Класс отвечает за хранение и логику работы с данными товаров.
#### Поля:
  - products: IProduct[] - публичное свойство, хранящее массив товаров
#### Методы:
- get products(): IProduct[] - Получение всех продуктов

### Класс OrderData
Отвечает за хранение и логику работы с данными при оформлении заказа 
#### Методы:
  - getOrder - получить все данные заказа
  - setItems - записывает в массив id товаров в заказе.
  - setTotalPrice - записывает общую цену заказа
  - clearOrder - очищает массив данных после заказа
  - setOrderForm - записывает данные с полей форм в массив данных заказа
  - validateOrder - валидация форм

### Класс BasketData
  Отвечает за хранение и логику работы с данными о товарах в корзине. 
#### Методы:
  - addItem - добавление товара в корзину,
  - deleteItem - удаление товара из корзины,
  - clearBasket - очистка корзины,
  - getTotalItems - получить обшее коллическво товаров, добавленных в корзину
  - getTotalPice - получить сумму всех товаров, добавленных в корзину

## Компоненты представления
### Класс Page
  Это класс отображения страницы, содержащей логотип, корзину с колличесвом товаров  и каталог товаров.
#### Методы:
- set catalog(items: HTMLElement[]) - записывает товары в каталог
- set counter(value: number) - записывает количество товаров в корзине
- set locked(value: boolean) - позволяет заблокировать страницу для прокрутки

### Класс Basket
  Класс используется для управления отображением данных в корзины.
#### Поля:
  - _products: HTMLElement - контейнер для размещения продуктов
  - _getTotalPrice: HTMLElement - общая сумма товаров
  - _button: HTMLElement - кнопка
#### Методы:
  - set products(items: HTMLElement[]) - записывает товары в корзину, выводит сообщение 'Корзина пуста' если товаров в корзине нет
  - set total(total: number) - записывает общую сумму товаров в корзине
  - toggleButton(state: boolean) - вспомогательный метод который переключает состояние кнопки

### Класс Card
  Класс отображения карточки. 
#### Методы:
  - set id \ get id - запись и поулчение id карточки товара
  - set title \ get title - запись и получение названия карточки товара
  - set price \ get price - запись и получние цены товара
  - set description - запись описание товара

### Класс Form
 Класс отображения элементов формы.
#### Поля:
  - _submitButton - кнопка отправки данных формы
  - _errors - DOM-элемент, ошибок
#### Методы:
  - onInputChange(field: keyof T, value: string) - защищенный метод для события введения данных пользователем
  - set valid(value: boolean) - разблокирует или заблокирует кнопку отправки
  - set errors(value: string) - добавляет ошибки валидации
  - render(state: Partial<T> & IFormState) - отрисовка формы

  ### Класс Success
  Класс отображения модального окна успешного заказа.
#### Поля:
  - _total - общая сумма заказа
  - _button - кнопка закрытия
#### Методы:
 - set total(value: number) - отображение общей суммы заказа